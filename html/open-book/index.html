<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <div class="book p3d">
        <!-- 先右后左 -->
        <div class="book-cover p3d">
            <div class="page back flip"></div>
            <div class="page front p3d">
                <div class="shadow"></div>
                <div class="pic"></div>
            </div>
        </div>

        <div class="front-cover p3d">
            <div class="page front flip p3d">
                <p>
                    妈咪请你放心，我过得很好!今天的泡面非常好吃，
                    今天的泡面和前二十天的价格是一样的值得高兴的是今天的份量要多一些，
                    瓦达西只差一点就可以吃饱了。本来我是想要加一根火腿肠的，
                    但是我知道我只是个普通人家的孩子，这样做过于奢侈。
                    哦，对了!最值得高兴的是，今天的蔬菜包里有两粒牛肉粒，
                    而且它的口感就像真的肉一样!还有泡面汤也很好喝!
                    我都舍不得喝完，于是我在里面又加了白开水，
                    这样就可以分给室友们了!
                    但是她们可能觉得这份礼物过于贵重所以婉拒了我。
                    于是我打算把剩下的汤留作晚餐。
                    等我凑够了钱一定带回去给你尝尝，勿念。
                </p>
            </div>

            <div class="page back"></div>
        </div>
    </div>

    <script>
        //鼠标摁住事件
        //鼠标移动事件
        var hold = false
        var page = document.querySelector('.front-cover')
        var pic = document.querySelector('.pic');
        var shadow = document.querySelector('.shadow')

        var clamp = function (val, min, max) {
            return Math.max(min, Math.min(val, max))//找中间值
        }

        page.onmousedown = function () {
            hold = true
        }
        //摁住为false
        window.onmouseup = function () {
            hold = false
        }
        //鼠标移动事件
        window.onmousemove = function (e) {
            //摁住才能执行
            if (hold == true) {
                var angle = clamp((window.innerWidth / 2 - e.pageX + 300) / 300 * -90, -180, 0)

                page.style.transform = `rotateY(${angle}deg)`

                //pic要立起来 绕X轴旋转 angle/2

                pic.style.transform = `rotateX(${angle / 2}deg)`

                //shadow要倾斜 angle/8
                shadow.style.transform = `skewX(${angle / 8}deg)`

            }
        }
    </script>
</body>

</html>